---
layout: post
title: "elk"
categories: elasticsearch logstash kibana
tags: cpu消耗
---
* content
{:toc}
### 一、Elasticsearch-单节点

##### 1、安装elasticsearch

elasticsearch运行需要java

 yum install java

[root@zys-yunwei ~]# java -version
openjdk version "1.8.0_242"
OpenJDK Runtime Environment (build 1.8.0_242-b08)
OpenJDK 64-Bit Server VM (build 25.242-b08, mixed mode)

下载中心

https://elasticsearch.cn/download/

**下载elasticsearch**

https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.1-x86_64.rpm

**安装**

 rpm -ivh elasticsearch-7.6.1-x86_64.rpm 

**配置**

vi /etc/elasticsearch/elasticsearch.yml 

```
cluster.initial_master_nodes: ["server1"]
cluster.name: zy-application
node.name: server1
#path.data: /storage/elasticsearch/
#path.logs: /storage/elasticsearch/
#bootstrap.mlockall: true
network.host: 0.0.0.0
http.port: 9200
```



**错误**

[2020-03-20T18:04:40,144][ERROR][o.e.b.Bootstrap          ] [server1] node validation exception
[1] bootstrap checks failed
[1]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured

 解决：

vi /etc/elasticsearch/elasticsearch.yml 

cluster.initial_master_nodes: ["server1"]